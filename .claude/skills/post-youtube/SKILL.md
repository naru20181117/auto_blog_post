---
name: post-youtube
description: YouTube動画からContentfulに記事を投稿
allowed-tools: Bash(pnpm run fetch-youtube:*), Bash(pnpm run publish:*), Bash(pnpm run validate:*), Bash(pnpm run post:sns:*), Bash(mv:*), WebFetch(domain:www.youtube.com), Read, Edit
---

# YouTube動画からContentfulに記事を投稿 & Xに拡散

YouTube動画のURLから字幕を取得し、ブログ記事に再構成してContentfulに公開、さらにXに自動投稿します。

## 動作ルール
- JSONファイルの編集は確認なしで即座に反映すること
- 「Do you want to make this edit?」などの確認質問はしない
- 字幕の「えーと」「あのー」などの口語表現は除去する
- 記事は読みやすく構造化する
- **確認は1回のみ**: 記事内容とX投稿文をまとめて確認し、承認後は一気に処理

## 入力
- $ARGUMENTS: YouTubeのURL (例: https://www.youtube.com/watch?v=xxxxx)

## フロー概要

```
Phase 1: 記事生成（自動）
    ↓
Phase 2: 確認（唯一の確認ポイント）
    ↓
Phase 3: 公開 & SNS投稿文提示（自動）
    ↓
手動で画像/動画を追加してSNS投稿
```

---

## Phase 1: 記事生成（自動）

### 1. 字幕とメタデータを取得
```bash
pnpm run fetch-youtube --url="$ARGUMENTS" --category="tips"
```

### 2. 生成されたJSONを確認
`articles/pending/youtube-{videoId}.json` を読み込み

### 3. カテゴリを判断
- `psychology`: 心理学・自己理解系
- `career`: キャリア・転職系
- `coaching-story`: コーチング体験談・創業ストーリー
- `tips`: ノウハウ・Tips系
- `interview`: インタビュー・コーチ紹介

### 4. 記事を再構成

#### 重要：記事調の文体ルール

**文字起こしではなく「読み物」として書く。** 自社メディアの記事として構成する。

**前提:**
- これはブライティーの自社メディア記事
- 動画の話者は「ブライティー代表のなる」
- 外部インタビューではなく「代表が語る」形式

**書き方の基本原則:**
- 「ブライティー代表のなる」または「代表のなる」「なる」と表記
- 「〜さんにお話を聞きました」❌ → 「代表のなるが〜についてお話しします」✅
- 「です・ます」調で統一
- 話の内容に対する補足説明や背景情報を自然に入れる
- 読者が「へぇ、なるほど」と思えるような解説を加える

**文体のトーン:**
- ニュース記事のような硬さ ❌
- 外部ライターのインタビュー記事 ❌
- 自社メディアとして代表が語る親しみやすさ ✅

**使える表現パターン:**
- 「代表のなるも、最初は〜でした」
- 「なるが大切にしている言葉に〜があります」
- 「〜となるは振り返ります」「〜と伝えています」
- 「実は〜」「ここで転機が訪れます」
- 「〜ではないでしょうか」「〜かもしれません」（読者への問いかけ）

**避けるべき書き方:**
- ❌ 話者が直接語りかける一人称「僕は〜しました」
- ❌ 硬すぎる表現「〜と語った」「〜と述べている」
- ❌ 外部インタビュー形式「〜さんにお話を聞きました」
- ❌ 動画の台詞をそのまま文章化しただけ

**body** (h2/h3/p形式):
- 必ず h2 から始める
- 適度に h3 で小見出しを追加
- 1つの p に200〜400文字程度を目安に
- 最後はブライティーへの興味を喚起する締めくくり
- **リード文を入れる**: 最初のh2の前に、記事全体を要約する導入文（p）を入れる

**その他のフィールド:**
- title (100文字以内): 読者の興味を引く魅力的なタイトル
- slug: 3〜5単語、半角英小文字・数字・ハイフンのみ
- excerpt (200文字以内): 読者の悩みに訴えかける誘導文
- metaDescription (160文字以内): 検索キーワードを含める
- tags (3〜6個): 検索されやすいキーワード

### 5. X投稿文を生成
**代表本人が投稿する形式**で、以下のルールで作成:

- 一人称（僕/私）で書く
- 動画で話したことに触れる
- 記事リンクのみ（動画リンクは不要）

```
[読者への問いかけや共感を得る一文]

[動画で話した内容の要約 + 記事にまとめたことを伝える]

https://www.brighty.site/blog/{slug}
```

### 6. JSONファイルを更新・リネーム
- `_meta` フィールドは削除
- ファイル名を `{slug}.json` に変更

---

## Phase 2: 確認（唯一の確認ポイント）

### 7. ユーザーに確認
以下を表示して承認を求める:

```
📝 記事プレビュー
─────────────────────────────
タイトル: {title}
カテゴリ: {category}
slug: {slug}
excerpt: {excerpt}

🐦 X投稿文
─────────────────────────────
{X投稿文}

─────────────────────────────
公開してXに投稿しますか？
```

---

## Phase 3: 公開 & SNS投稿文提示（自動）

### 8. バリデーション
```bash
pnpm run validate --file="{slug}.json"
```

### 9. Contentfulに公開
```bash
pnpm run publish:live --file="{slug}.json"
```

### 10. 結果を報告 & SNS投稿文を提示
`config/sns.ts` のガイドラインに従い、投稿文を生成して提示する。

**ガイドライン要点:**
- 記事の焦点を1〜2点に絞る
- 箇条書きで簡潔に
- ユーザー視点のベネフィットを明示
- ハッシュタグ `#コーチング` を付ける
- リンクはリプライで貼るため、メイン投稿には含めない

**提示フォーマット:**
```
✅ 完了しました！

📝 記事
- Contentful: {contentful_url}
- 公開URL: https://www.brighty.site/blog/{slug}

🎬 元動画
- {youtubeUrl}

─────────────────────────────

📱 SNS投稿文（メイン）
─────────────────────────────
{投稿文}

#コーチング
─────────────────────────────

📎 リプライ用
─────────────────────────────
詳しくはこちら👇
https://www.brighty.site/blog/{slug}
─────────────────────────────

※ 画像/動画を追加して投稿してください
```

---

## 文体の比較例

### ❌ 悪い例（一人称・文字起こし調）
> 僕は学生の頃、とにかく大企業に行くものだと思っていました。

### ❌ 悪い例（外部インタビュー形式）
> 今回は、代表のなるさんにお話を聞きました。

### ✅ 良い例（自社メディア形式）
> 代表のなるも、最初は大企業志望でした。ところが、インターン中に転機が訪れます。

---

## SNS投稿文の例（X・Threads共通）

```
大企業か、スタートアップか。

僕が「鶏口牛後」の考え方でスタートアップを選んだ理由を動画で話しました。記事にもまとめています。

https://www.brighty.site/blog/coaching-startup-keikougyugo
```

**ポイント:**
- 代表本人（なる）が投稿している形式
- 読者への問いかけから始める
- 「動画で話しました」「記事にまとめています」で両方に触れる
- リンクは記事のみ
